---
title: 浅谈android的selector，背景选择器
author: angelgong
type: post
date: 2014-03-05T08:41:54+00:00
url: /2014/03/浅谈android的selector，背景选择器
id: 201411
categories:
  - Android
  - 编程开发
tags:
  - Android

---
<span style="font-family: Arial; line-height: 25.99431800842285px; font-size: medium;">原文链接：</span>http://blog.csdn.net/jrcisme/article/details/6444653
	  
<span style="font-family: Arial; line-height: 25.99431800842285px; font-size: medium;">关于listview和button都要改变android原来控件的背景，在网上查找了一些资料不是很全，所以现在总结一下android的selector的用法。<br /> 首先android的selector是在drawable/xxx.xml中配置的。<br /> <span style="color: rgb(255, 0, 0);">先看一下listview中的状态：</span><br /> 把下面的XML文件保存成你自己命名的.xml文件（比如list_item_bg.xml），在系统使用时根据ListView中的列表项的状态来使用相应的背景图片。<br /> <span style="color: rgb(255, 0, 0);">drawable/list_item_bg.xml</span><br /> <?xml version="1.0" encoding="utf-8" ?>&nbsp; &nbsp;<br /> <selector xmlns:android="http://schemas.android.com/apk/res/android">&nbsp;<br /> <!&#8211; 默认时的背景图片 &#8211;>&nbsp;&nbsp;<br /> &nbsp;&nbsp;<item android:drawable="@drawable/pic1" />&nbsp; &nbsp;&nbsp;<br /> <!&#8211; 没有焦点时的背景图片 &#8211;>&nbsp;&nbsp;<br /> &nbsp;&nbsp;<item android:state_window_focused="false"&nbsp; &nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;android:drawable="@drawable/pic1" />&nbsp; &nbsp;<br /> <!&#8211; 非触摸模式下获得焦点并单击时的背景图片 &#8211;>&nbsp;&nbsp;<br /> &nbsp;&nbsp;<item android:state_focused="true" android:state_pressed="true"&nbsp; &nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;android:drawable= "@drawable/pic2" />&nbsp;&nbsp;<br /> <!&#8211; 触摸模式下单击时的背景图片 &#8211;>&nbsp;&nbsp;<br /> &nbsp;&nbsp;<item android:state_focused="false" android:state_pressed="true"&nbsp; &nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;android:drawable="@drawable/pic3" />&nbsp; &nbsp;<br /> <!&#8211;选中时的图片背景&nbsp;&nbsp;&#8211;>&nbsp;&nbsp;<br /> &nbsp;&nbsp;<item android:state_selected="true"&nbsp; &nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;android:drawable="@drawable/pic4" />&nbsp; &nbsp;<br /> <!&#8211;获得焦点时的图片背景&nbsp;&nbsp;&#8211;>&nbsp;&nbsp;<br /> &nbsp;&nbsp;<item android:state_focused="true"&nbsp; &nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;android:drawable="@drawable/pic5" />&nbsp; &nbsp;<br /> </selector><br /> 使用些xml文件：第一种是在listview中配置android:listSelector="@drawable/<span style="color: rgb(255, 0, 0);">list_item_bg</span><br /> 或者在listview的item中添加属性android：background=&ldquo;@drawable/<span style="color: rgb(255, 0, 0);">list_item_bg</span>"即可实现，或者在java代码中使用：Drawable drawable = getResources().getDrawable(R.drawable.<span style="color: rgb(255, 0, 0);">list_item_bg</span>);&nbsp;&nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp; ListView.setSelector(drawable);同样的效果。<br /> 但是这样会出现列表有时候为黑的情况，需要加上：<span style="color: rgb(255, 0, 0);">android:cacheColorHint="@android:color/transparent"<br /> <span style="color: rgb(0, 0, 0);">使其透明。</span><br /> 其次再来看看Button的一些背景效果：</span><br /> android:state_selected是选中<br /> android:state_focused是获得焦点<br /> android:state_pressed是点击<br /> android:state_enabled是设置是否响应事件,指所有事件<br /> 根据这些状态同样可以设置button的selector效果。也可以设置selector改变button中的文字状态。<br /> 以下就是配置button中的文字效果：<br /> <span style="color: rgb(255, 0, 0);">drawable/</span><span style="color: rgb(255, 0, 0);">button_font.xml</span><br /> <?xml version="1.0" encoding="utf-8"?><br /> <selector xmlns:android="http://schemas.android.com/apk/res/android"><br /> &nbsp; &nbsp; <item android:state_selected="true" android:color="#FFF" /><br /> &nbsp; &nbsp; <item android:state_focused="true" android:color="#FFF" /><br /> &nbsp; &nbsp; <item android:state_pressed="true" android:color="#FFF" /><br /> &nbsp; &nbsp; <item android:color="#000" /><br /> </selector><br /> Button还可以实现更复杂的效果，例如渐变啊等等。<br /> <span style="color: rgb(255, 0, 0);">drawable/</span><span style="color: rgb(255, 0, 0);">button_color.xml</span><br /> <?xml version="1.0" encoding="utf-8"?><br /> <selector xmlns:android="http://schemas.android.com/apk/res/android">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;/&nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<item android:state_pressed="true">//定义当button 处于pressed 状态时的形态。&nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<shape>&nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<gradient&nbsp;&nbsp;android:startColor="#8600ff" />&nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; <stroke&nbsp; &nbsp;android:width="2dp" android:color="#000000" />&nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<corners android:radius="5dp" />&nbsp;&nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<padding android:left="10dp" android:top="10dp"&nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;android:bottom="10dp" android:right="10dp"/>&nbsp;&nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</shape>&nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</item>&nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<item android:state_focused="true">//定义当button获得 focus时的形态&nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<shape>&nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<gradient android:startColor="#eac100"/>&nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;<stroke android:width="2dp" android:color="#333333"&nbsp;&nbsp;color="#ffffff"/>&nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; <corners android:radius="8dp" />&nbsp; &nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; <padding android:left="10dp" android:top="10dp"&nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; android:bottom="10dp" android:right="10dp"/>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; </shape>&nbsp;<br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</item><br /> </selector>&nbsp;<br /> &nbsp; &nbsp;&nbsp;&nbsp;最后，需要在包含 button的xml文件里添加两项。假如是 main.xml 文件，<br /> 我们需要在<Button />里加两项。&nbsp;<br /> &nbsp; &nbsp;&nbsp;&nbsp;android：focusable="true"&nbsp;<br /> &nbsp; &nbsp;&nbsp;&nbsp;android:backgroud="@drawable/button_color"<br /> 这样当你使用Button的时候就可以甩掉系统自带的那黄颜色的背景了，实现个性化的背景，配合应用的整体布局非常之有用啊。</span>